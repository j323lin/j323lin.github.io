<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"> 
	<title>CIS 128 Mobile Web App Development -- PWA </title> 
	<meta name="description" content="A page demonstrating pwa skills"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json" />  
    <link rel="stylesheet" type="text/css" href="style.css"> 
  </head>

  <body id="theme">
    <header>
        <h1>
            A PWA that lets user change background 
        </h1>
    </header>
    <div id="content">
        <p>A Progressive Web App (PWA) is a type of web application that provide users with a native app-like experience 
            directly within a web browser. They are designed to work on any device or platform that uses a browser.</p>
        <dl>
            Here are the 2 key features of a pwa: 
            <dt>1. Service Workers</dt>
                <dd>
                    Service workers are JavaScript files that run in the background independently of the web page,
                    intercepting network requests, caching resources, managing push notifications and handles background synchronization. 
                    By caching resources locally, users can use the application even offline.
                </dd>
            <dt>2. Manifest File</dt>
                <dd>
                    PWAs are installable, onto the device's home screen for access, like how apps do. 
                    The manifest file is a JSON file that provides the start url, name, icons, colors, and display mode. 
                    By including a manifest file, we can control how the PWAappears when launched from the home screen.
                </dd>
        </dl>
        <label for="background">Choose a background image:</label>
        <select name="background" id="background">
            <option value="white">None</option>
            <option value="lightgold">Light Gold</option>
            <option value="lightblue">Light Blue</option>
    </div>
  </body>
  
  <script>
    // Register the Service Worker 
    if (navigator.serviceWorker) {
    window.addEventListener('load', () => {
	   navigator.serviceWorker.register("service-workerv2.js")
	      .then(registration => console.log('Service worker registered'))
		  .catch(err => console.log(`Service worker not registered - Error: ${err}`))
    })
} else {
    console.log('Service Worker is not supported in this browser.')
}
  </script> 
  <script>
    document.getElementById('background').addEventListener('change', function() {
        var bg = this.value;
        if (bg == "white"){
            document.getElementById("theme").style.backgroundColor = this.value;
        }
        else if (bg == "lightgold"){
            document.getElementById("theme").style.backgroundImage = 'url("images/lightgold.jpg")';
        }
        else if (bg == "lightblue"){
            document.getElementById("theme").style.backgroundImage = 'url("images/lightblue.jpg")';
        }        

    })
  </script>
</html>
