<!DOCTYPE html>

<html>
<head>
<!DOCTYPE html>

<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

  <title>Geolocation shown with leaflet openstreetmap and user allows</title>
</head>

<header>
  <div id="navbar-spot"></div>
  <script> 
    $(function(){
      $("#navbar-spot").load("navbarAwesome.html"); 
    });
  </script> 
</header>

<body onload="showMap_islocationenabled()">
  <div class="container m-3">
    <p class="text-info"> If your device supports geolocation and you have approved it, 
      please be patient while the site gets your current location. </p>
    <div id="map" style="height: 180px;"></div>
    <br>
    <p id="coor_str"></p>
    <p id="error_str"></p>
  </div>

    <script>

        function get_coords(position)
        {
            latitude=position.coords.latitude;
            longitude=position.coords.longitude;
            str = "latitude: "+latitude + " longitude: " + longitude;
            document.getElementById('coor_str').textContent = str;

            var map = L.map('map').setView([latitude, longitude], 16);
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);
            var marker = L.marker([latitude, longitude]).addTo(map);

        }
        
        function if_error(err)
        {
            if(err.code==1){str2= ' User denied'; str = str1.concat(str2);}
            if(err.code==2){str2= ' Position unavailable'; str = str1.concat(str2);}
            if(err.code==3){str2= ' Time Out'; str = str1.concat(str2);}
                    document.getElementById('error_str').textContent = str;
        }
        
        function showMap_islocationenabled() {
          var str = "No, geolocation is not supported.";
    
          if (window.navigator.geolocation) {
            str1 = "Yes, geolocation is supported.";
            navigator.geolocation.getCurrentPosition(get_coords, if_error);
            
          }
        }
      </script>
</body>

<!-- check head -->